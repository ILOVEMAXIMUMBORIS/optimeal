"use strict";function ibg(){for(var e=document.querySelectorAll(".ibg"),t=0;t<e.length;t++){var n=e[t].querySelector("img");if(n){if(n.classList.contains("lazyload")||n.classList.contains("lazyloading")||n.classList.contains("lazyloaded"))continue;e[t].style.backgroundImage="url("+e[t].querySelector(".ibg__img, img").getAttribute("src")+")"}}}function validateArrayInputs(e){if(!e)return!0;for(var t={},n=!0,o=0;o<e.length;o++){var i=e[o],r=i.getAttribute("type")||"text",a=i.hasAttribute("required"),l=i.getAttribute("name")||!1;i.classList.contains("input-invalid")&&(n=!1),!a||l&&0<t[l]||("radio"!=r&&"checkbox"!=r?"hidden"!=r&&""==i.value&&(i.classList.add("input-invalid"),n=!1):(t[l]=1,notEmptyCheckBoxOrRadio(l)||(markInvalidGrougInput(l),n=!1)))}return n}function notEmptyCheckBoxOrRadio(e){return 0<document.querySelectorAll("input[name="+e+"]:checked").length}function markInvalidGrougInput(e){var t=document.querySelectorAll("input[name="+e+"]");if(t)for(var n=0;n<t.length;n++){var o=t[n];o.classList.add("input-invalid"),o.addEventListener("change",function(){UnmarkInvalidGrougInput(e)},{once:!0})}}function UnmarkInvalidGrougInput(e){var t=document.querySelectorAll("input[name="+e+"]");if(t)for(var n=0;n<t.length;n++){t[n].classList.remove("input-invalid")}}function getCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,bottom:t.top+e.offsetHeight+pageYOffset,left:t.left+pageXOffset}}function throttle(n,o){var i,r,a=!1;return function e(){if(a)return r=this,void(i=arguments);n.apply(this,arguments),a=!0;var t=function(){a=!1,r&&i&&(e.apply(r,i),r=i=null)};"number"==typeof o?setTimeout(t,o):"frame"==o&&requestAnimFrame(t)}}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,16.666)},ibg(),window.pageX=!1,window.pageY=!1,window.addEventListener("mousemove",function(e){window.pageX=e.pageX,window.pageY=e.pageY}),document.addEventListener("DOMContentLoaded",function(){function e(e,t){var n=t.querySelector(".container");n&&(n.style.marginTop=e.clientHeight+"px")}var t,n;!function(){var e=document.querySelectorAll(".btn--action");if(e)for(var t=0;t<e.length;t++){var n=e[t];n.classList.contains("btn--action--show-bg")||n.querySelector(".btn--action__bg")||(n.innerHTML+='<svg class="btn--action__bg" preserveAspectRatio="none" viewBox="0 0 200 60" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#custom_back_btn)"><path d="M33.08 1.403C11.383 2.581 0 14.873 0 27.276c0 15.038 1.576 26.629 15.92 31.422 11.09 3.714 39.793-1.878 74.42-1.724 46.521.196 77.851 2.495 87.321 3 27.069 1.401 33.066-53.259-1.897-57.295C144.376-.881 67.81-.447 33.081 1.403z" fill="url(#custom_back_btn-1)"/></g><defs><linearGradient id="custom_back_btn-1" x1="0" y1="-23.125" x2="151.157" y2="60.413" gradientUnits="userSpaceOnUse"><stop stop-color="#FFB1A4"/><stop offset="1" stop-color="#FF5F4E"/></linearGradient><filter id="custom_back_btn" x="0" y="0" width="200" height="60" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dx="4" dy="-5"/><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/><feColorMatrix values="0 0 0 0 1 0 0 0 0 0.801587 0 0 0 0 0.75 0 0 0 0.68 0"/><feBlend in2="shape" result="effect1_innerShadow"/></filter></defs></svg>'),n.classList.add("btn--action--show-bg")}}(),function(){var r=document.querySelectorAll(".toggle-display button");for(var e=function(e){var t=r[e],n=t.getAttribute("data-element");if(!n)return"continue";n=n.split("@");for(var o=t.parentElement,i=0;i<n.length;i++)"next"==n[i]&&(o=o.nextElementSibling),"prev"==n[i]&&(o=o.previousElementSibling);if(o==t.parentElement)return"continue";t.showTargetElement=function(){t.classList.add("js-active"),o.style.display=""},t.closeTargetElement=function(){t.classList.remove("js-active"),o.style.display="none"},t.addEventListener("click",function(){if(!this.classList.contains("js-active")){for(var e=this.parentElement.querySelectorAll("button"),t=0;t<e.length;t++)e[t].closeTargetElement();this.showTargetElement()}})},t=0;t<r.length;t++)e(t)}(),(t=document.querySelector(".header"))&&t.querySelectorAll(".header__menu a"),(n=t&&t.nextElementSibling)&&(e(t,n),window.addEventListener("resize",function(){e(t,n)}),window.addEventListener("load",function(){e(t,n)})),function(){var e=document.querySelectorAll("a");if(e)for(var t=0;t<e.length;t++){var o=e[t],n="";o.getAttribute("href")&&"#"==o.getAttribute("href")[0]&&1<o.getAttribute("href").length&&function(){var t=document.querySelector(o.getAttribute("href"));if(t){var n="top";o.classList.contains("js-scroll-pos-center")&&(n="center"),o.addEventListener("click",function(e){e.preventDefault(),smoothScrollToCoords(t,{positionBlock:n})})}}(),o.getAttribute("href")&&"mailto"==o.getAttribute("href").split(":")[0]&&(n='<svg class="mail" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.3 10h10.4c.715 0 1.3.563 1.3 1.25v7.5c0 .688-.585 1.25-1.3 1.25H3.3c-.715 0-1.3-.563-1.3-1.25v-7.5c0-.688.585-1.25 1.3-1.25z" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 11l-6.5 5L2 11" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round"/></svg>'),o.innerHTML=n+o.innerHTML+""}}(),function(){var a=document.querySelectorAll(".section-1");if(a)for(var e=function(){var e=a[l],t=e.querySelector(".section-1__heroes"),o=e.querySelector(".img-glaz-1"),i=e.querySelector(".img-glaz-2");if(e.querySelector(".section-1__cloud-1"),e.querySelector(".section-1__cloud-2"),!o)return"continue";if(!i)return"continue";var n=function(){},r=function(){};!function e(){!function(){var e=getCoords(o),t=!1!==window.pageX?(window.pageX-e.left)/20:0;t=15<(t=t<-14?-14:t)?15:t;var n=!1!==window.pageY?(window.pageY-e.top)/20:0;n=11<(n=n<-12?-12:n)?11:n,o.style.transform="translate("+t+"px, "+n+"px)"}(),function(){var e=getCoords(i),t=!1!==window.pageX?(window.pageX-e.left)/20:0;t=15<(t=t<-14?-14:t)?15:t;var n=!1!==window.pageY?(window.pageY-e.top)/20:0;n=10<(n=n<-11?-11:n)?10:n,i.style.transform="translate("+t+"px, "+n+"px)"}(),n(),r(),requestAnimFrame(e)}(),t&&!window.checkBrowser.supportsTouch&&t.classList.add("js-active")},l=0;l<a.length;l++)e()}(),function(){var t=document.querySelectorAll(".section-5");if(t)for(var e=function(){var e=t[n],o=(e.querySelector(".section-5__grusha"),e.querySelector(".glaz-grusha-1")),i=e.querySelector(".glaz-grusha-2");return o&&i?void function e(){!function(){var e=getCoords(o),t=!1!==window.pageX?(window.pageX-e.left)/20:0;t=16<(t=t<-16?-16:t)?16:t;var n=!1!==window.pageY?(window.pageY-e.top)/20:0;n=12<(n=n<-12?-12:n)?12:n,o.style.transform="translate("+t+"px, "+n+"px)"}(),function(){var e=getCoords(i),t=!1!==window.pageX?(window.pageX-e.left)/20:0;t=16<(t=t<-16?-16:t)?16:t;var n=!1!==window.pageY?(window.pageY-e.top)/20:0;n=16<(n=n<-16?-16:n)?16:n,i.style.transform="translate("+t+"px, "+n+"px)"}(),requestAnimFrame(e)}():"continue"},n=0;n<t.length;n++)e()}(),function(){var t=document.querySelectorAll(".section-7__form form");if(t)for(var e=function(e){var i=t[e];i.addEventListener("submit",function(e){var t,n,o;e.preventDefault(),t=i,n=new XMLHttpRequest,o=new FormData(t),n.addEventListener("load",function(e){alert("Спасибо! Форма отправлена."),t.style.pointerEvents="none",t.style.opacity="0.7"}),n.addEventListener(" error",function(e){alert("Что-то пошло не так :(. Попробуйте еще раз")}),n.open("POST","https://optimealkids.pro/send-mail.php"),n.send(o)})},n=0;n<t.length;n++)e(n)}();var o=document.querySelectorAll(".section-5__form");if(o)for(var i=function(){var m=o[r],v=m.nextElementSibling;if(!v||!v.classList.contains("section-5__btn"))return"continue";var g=document.querySelector(".section-5__result-block"),p=new Splide(m,{arrows:!1,keyboard:!1,drag:!1});(m.letSplideCarousel=p).mount();var h={1:0,2:0,3:0,4:0};v.addEventListener("click",function(){var e=p.index==p.length-1,t=p.Components.Elements.getSlide(p.index);if(validateArrayInputs(t.slide.querySelectorAll("input"))){p.go("+");var n=t.slide.querySelector("input:checked");if(n)for(var o=0,i=n.attributes,r=i.length;o<r;o++){var a=i[o].nodeName.match(/^data-form-value_(.+)/);a&&(h[a[1]]+=1)}if(p.index==p.length-1&&(this.innerHTML=this.innerHTML.replace("Следующий вопрос","Завершить тест")),console.log(h),e){var l=g.querySelectorAll("div"),s=0,c=0;for(var u in h)s++,0==h[u]&&l[u-1]&&(l[u-1].classList.add("not-view"),c++);c==s&&(g.innerText="Если вы ответили на все вопросы честно, то ваш ребенок совершенно здоров, но ему все равно не помешает профилактика :)"),g.classList.add("animate"),m.classList.add("animate"),v.classList.add("animate");var d=m.clientHeight,f=g.clientHeight-v.clientHeight;d<f&&(m.style.height=f+"px")}}})},r=0;r<o.length;r++)i();var a=document.querySelectorAll(".section-3__carousel"),f=document.querySelectorAll(".section-4__carousel");if(f&&a){var l=function(){var l=!window.matchMedia("(min-width: 992px)").matches,n=new Splide(f[r],{start:l?0:1});if(!a[r])return n.mount(),"continue";var s=new Splide(a[r],{perPage:4,breakpoints:{991.98:{perPage:1},1259.98:{perPage:3}}}),c=!1,u=a[r].querySelectorAll(".section-3__item"),d=function(e,t){if(l){var n=s.Components.Elements.getSlide(e).slide,o=n&&n.querySelector(".section-3__item");o&&setTimeout(function(){o.dispatchEvent(new Event("click"))},0)}},o=function(e,t){s.off("move.listenmove");var n=0<=e-1?e-1:0;l&&(n=e),s.go(n);var o=s.Components.Elements.getSlide(e).slide,i=o&&o.querySelector(".section-3__item");if(u&&i){for(var r=0;r<u.length;r++)u[r].classList.contains("js-active")&&(s.Components.Elements.list.style.minHeight=u[r].clientHeight+"px"),u[r].classList.remove("js-active");i.classList.add("js-active")}if(c){for(var a=0;a<c.length;a++)c[a].classList.remove("js-active");c[e]&&c[e].classList.add("js-active")}l&&e!=t&&smoothScrollToCoords("#product_container",{margin:15,duration:400}),s.on("move.listenmove",d)};if(u)for(var e=0;e<u.length;e++){u[e].addEventListener("click",function(){for(var e,t=0;t<u.length;t++)u[t].classList.contains("js-active")&&(s.Components.Elements.list.style.minHeight=u[t].clientHeight+"px"),u[t]==this&&(e=t),u[t].classList.remove("js-active");this.classList.add("js-active"),n.off("move.listenmove"),s.off("move.listenmove"),void 0!==e&&n.go(e),n.on("move.listenmove",o),s.on("move.listenmove",d)},!1)}n.on("move.listenmove",o),s.on("move.listenmove",d),n.mount(),s.mount()};for(r=0;r<f.length;r++)l()}window.supportsTouch||(new Parallax(document.querySelector("#scene-parallax-1")),new Parallax(document.querySelector("#scene-parallax-2")))}),window.addEventListener("load",function(){document.querySelectorAll(".section-5__form");AOS&&setTimeout(function(){AOS.init()},0)});